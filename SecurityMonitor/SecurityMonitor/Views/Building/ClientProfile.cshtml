@{
    ViewBag.Title = "ClientProfile";
    Layout = "~/Views/Shared/_LayoutTenant .cshtml";
}




@model SecurityMonitor.Models.ClientHomeVM

@{
    ViewBag.Title = "ClientHome";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 headerDefault">
        <ol class="breadcrumb" style="line-height:20px;" id="clientbreadcrumbid">
            <li>@Html.ActionLink("Home", "index", "Home", null, new { @class = "breadcrumblink" })</li>
            <li>@Html.ActionLink("Client's Page", "ClientHome", "building", null, new { @class = "breadcrumblink" })</li>
            <li>Client's Profile</li>
        </ol>


    </div>


</div>






<!--================================================================Client Page===================================================================================-->
<!--====================================================Header client page============================================================-->

<div class="row ">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding-bottom:15px;">

            <div class="row  " id="modalheaderid">
                <div class="col=-lg-12 col-md-12 col-sm-12 col-xs-12 blueDefault_no_border">

                </div>
                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 blueDefault repairrequestformheader headerDefault clientbuildinglist">

                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6  repairrequestformheader text-center headerDefault clientbuildinglist  ">
                    <section class="modal-title myModalLabel " data-bind="text:SelectedClientName"></section>
                </div>
                <div id="miniMenuid" class="col-lg-3 col-md-3 col-sm-3 col-xs-3 blueDefault headerDefault clientbuildinglist">

                    <section data-toggle="popover" id="facongid"
                            title="Client Advance Settings"
                            class="btn pull-right displayinline OpenRequestsSettings fa fa-cog fa-1x  font_color_white  "></section>

                    <!--======================================================Advance setting for client page===================================================-->

                    <div id="popover_content_wrapper" style="display: none; ">
                        <div class=" " style="">
                            <div class="col-lg-4 col-md-43 col-sm-4 col-xs-4 text-center nopadding rowheight">
                                <button class="btn btn-sm  fa fa-pencil-square-o hollow5 ClientIconbox"
                                        data-toggle="modal" data-target="#myModalEdit" data-bind="click:editme"></button>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-center nopadding rowheight">
                                <div class="btn btn-sm fa fa-trash hollow5 ClientIconbox " id="deleteme" data-toggle="modal" data-target="#myModalDelete"></div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-center nopadding rowheight">
                                <button class="btn btn-sm fa fa-map-marker hollow5 ClientIconbox"></button>
                            </div>
                            <hr />
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center nopadding rowheight">
                                <button class="btn btn-sm fa fa-share-alt hollow5 ClientIconbox"></button>
                            </div>

                        </div>
                    </div><!--ending for Advance settings-->
                </div><!--ending for header-->
                <!--=========================================================Client Page body=================================================================-->









                <div class="modal-body border lightgrey">
                    <div class="row boxclientContent ">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12  ">

                            <!--Client Information Information -->
                            <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12  BoxClientInforight">
                                <span class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center clientContactinfoHeader " data-bind="text:SelectedClientName">Brooklyn Terrance Inc</span>
                                <span class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center  clientContactinfo " data-bind="text:SelectedClientFullAddress">1411 Broadway</span>
                                <span class="col-lg-12 col-md-12 text-center col-sm-12 col-xs-12  ClientPhone " data-bind="text:citystatezip"></span>
                                <span class="col-lg-12 col-md-12 text-center col-sm-12 col-xs-12  ClientPhone " data-bind="text:SelectedClientEmail"></span>
                                <span class="col-lg-12 col-md-12 text-center col-sm-12 col-xs-12 ClientPhone " data-bind="text:SelectedClientPhone"></span>
                                <span class="col-lg-12 col-md-12 text-center col-sm-12 col-xs-12 ClientPhone "><span class="linkdefault">Map  &nbsp;</span>|<span class="linkdefault"> &nbsp;Share</span></span>

                            </div>
                            <!--Client Contact information-->
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 Row_Client_Box BoxClientInfo ">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 Row_Client_Contact_header">
                                    <span class="fa fa-plus hollow5 linkdefault" data-toggle="modal" data-target="#myModalClientContact"> + New Contact &nbsp;</span> |
                                    <span class="fa fa-plus hollow5 linkdefault" data-toggle="modal" data-target="#myModalViewClientContact" data-backdrop="static"> Show Contacts</span>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 Row_Client_Contact text-center">

                                    Richard Valentine
                                    <br />
                                    Phone: 34729899009
                                    <br />
                                    Email: Example@gmail.com
                                    <br />
                                </div>
                            </div>
                            <!--=================================================================List of Building=================================================-===-->

                            <div class="col-lg-3 col-md-3 hidden-sm hidden-xs blueDefault clientbuildinglist"></div><!--empty div-->
                            <!--======================================================Building Row's content starts=========================================-->

                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-center  blueDefault clientbuildinglist">
                                <section class="myModalLabel">BUILDINGS</section>
                            </div>
                            <div id="popoverparent" class="col-lg-3 col-md-3 col-sm-12 col-xs-12 blueDefault clientbuildinglist">
                                <section class="btn pull-right displayinline openrequestssettings Client_Searchloop fa fa-plus-circle fa-1x font_color_white" id="hitme" data-toggle="modal" data-target="#myModalAddBuilding"></section>
                                <section data-bind="popover: {options: {placement: 'top' }, template: 'popoverBindingTemplate'}"
                                         class="btn pull-right displayinline OpenRequestsSettings Client_Searchloop fa fa-search fa-1x font_color_white"></section>

                                <script type="text/html" id="popoverBindingTemplate">
                                    
                                    <button class="close pull-right clearinputfield" type="button" data-bind="click:clearinputfield">×</button>
                                    <form>
                                        <input id="buildingsearchid" type="text" data-bind="value: buildingSearch, valueUpdate:'afterkeydown'" />
                                    </form>
                                </script>

                            </div>
                            <!--=======================================================================search loop bar=========================================================-->


                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12  BoxClientbuildingList   " >
                                <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 bldslistrows border-bottomcust hollow5 text-center " data-bind="click:BuildingSelected">
                                    <span class="col-lg-4 col-md-4 col-sm-4 col-sx-4 displayinline padding-right_20px">Name</span>
                                    <span class=" col-lg-4 col-md-4 col-sm-4 col-sx-4  displayinline text-left padding-right_20px">Address</span>
                                    <span class="col-lg-4 col-md-4 col-sm-4 col-sx-4  displayinline padding-right_20px">Phone</span>
                                </div>
                            </div>

                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12  BoxClientbuildingList   " data-bind="foreach:BuildingList">
                                <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 bldslistrows border-bottomcust hollow5 text-center " data-bind="click:BuildingSelected">
                                    <span class=" col-lg-4 col-md-4 col-sm-4 col-sx-4 displayinline padding-right_20px" data-bind="text:BLBuildingName"></span>
                                    <span class="col-lg-4 col-md-4 col-sm-4 col-sx-4  displayinline text-left padding-right_20px" data-bind=" text:BLBuildingAddress"></span>
                                    <span class=" col-lg-4 col-md-4 col-sm-4 col-sx-4  displayinline padding-right_20px" data-bind="text:BLPhone"></span>
                                </div>
                            </div>
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 extraContentinsideFooter  ">
                            </div>
                        </div>


                    </div>
                </div>

            </div>

        </div>
    </div>

</div>


<!--======================================================Add Building Modal=======================================================-->



















<div class="modal fade" id="myModalAddBuilding" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header nopadding " id="modalheaderid">
              
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 blueDefault text-center">
                   <section class="myModalLabel">Add new Building</section>
                    <section type="button" class="fa fa-close pull-right" data-dismiss="modal"><span aria-hidden="true"> </span></section>

                </div>

            </div>
            <div class="modal-body lightgrey">
                <!--New building-->
                <div class=" col-lg-12 col-md-12 col-sm-12 col-xs-12 frame">
                    <section class=" col-lg-12 col-md-12 col-sm-12 col-xs-12 frame2">
                        <!--Left-->
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 " style="margin-top:20px !important;">


                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12   nopadding  ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                                    Building Name
                                </div>
                            </div>

                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 paddingBottom20px  nopadding ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                                    <input type="text" class="form-control" data-bind="value:NewBuildingName" />
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 nopadding ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    Building Address
                                </div>
                            </div>

                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                                    <input type="text" class="form-control" data-bind="value:NewBuildingtAddress" />
                                </div>
                            </div>

                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 nopadding">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    Building City
                                </div>
                            </div>


                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 paddingBottom20px nopadding">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    <input type="text" class="form-control" data-bind="value:NewBuildingtCity" />
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 nopadding  ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    Building State
                                </div>
                            </div>

                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">

                                    <select class="form-control" data-bind=" options:StateList,optionsText:'Text', optionsValue:'Text', optionsCaption:SelectedClientState,value:NewBuildingState"></select>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 nopadding  ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    Building Zipcode
                                </div>
                            </div>
                              
                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    <input type="text" class="form-control" data-bind="value:NewBuildingtZipcode" />
                                </div>
                            </div>
                        </div>

                        <!--Right-->
                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 " style="margin-top:20px !important;">

                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 nopadding  ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    Building Fax
                                </div>
                            </div>

                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    <input type="text" class="form-control col-lg-2 col-md-2" data-bind="value:SelectedClientFax" />
                                </div>
                            </div>

                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 nopadding ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    Building Phone
                                </div>
                            </div>

                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    <input type="text" class="form-control" data-bind="value:SelectedClientPhone" />
                                </div>
                            </div>

                            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12  nopadding  ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6   ">
                                    Building Email
                                </div>
                            </div>

                            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                    <input type="text" class="form-control" data-bind="value:SelectedClientEmail" />
                                </div>
                            </div>
                         </div>
                        </section>
                        </div>
                     
            </div>
            <div class="modal-footer">
                <div class=" col-lg-7 col-md-7 col-sm-7 col-xs-7">
                </div>
                <div class=" col-lg-5 col-md-5 col-sm-5 col-xs-5">
                    <button class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button class="btn btn-default" data-dismiss="modal" data-bind="click:AddNewBuilding">Add</button>
                </div>

            </div>
        </div>
    </div>
</div><!-- ending tag for Clientpage-->
<!--============================================================================Edit Client's information popup===========================================================-->

<div class="modal fade" id="myModalEdit" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!--header Edit client information-->
            <div class="modal-header nopadding " id="modalheaderid">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <div class="col-lg-12 colmd-12  repairrequestformheader text-center " data-bind=" text:SelectedClientName">
                    <h2 class="modal-title myModalLabel " style="color:white; " data-bind="text:SelectedClientName"></h2>
                </div>
            </div><!--Ending tag fo r edit client information-->
            <!--================================================================================Edit cliet form================================================================-->

            <div class="modal-body lightgrey">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 noppading" style="margin-top:20px !important;">
                    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12   nopadding  ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                            Building Name
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px  nopadding ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                            <input type="text" class="form-control" data-bind="value:SelectedClientName" />
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            Building Address
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                            <input type="text" class="form-control" data-bind="value:SelectedClientAddress" />
                        </div>
                    </div>
                    <!--=======================================line 2===================================================-->

                    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            Building City
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            <input type="text" class="form-control" data-bind="value:SelectedClientCity" />
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding  ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            Building State
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">

                            <select data-bind=" options:StateList,optionsText:'Text', optionsValue:'Text', optionsCaption:SelectedClientState,value:SelectedClientState"></select>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding  ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            Building Zipcode
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            <input type="text" class="form-control" data-bind="value:SelectedClientZipcode" />
                        </div>
                    </div>



                    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding  ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            Building Fax
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            <input type="text" class="form-control col-lg-2 col-md-2" data-bind="value:SelectedClientFax" />
                        </div>
                    </div>

                    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            Building Phone
                        </div>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                        <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                        <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                            <input type="text" class="form-control" data-bind="value:SelectedClientPhone" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <button type="button" class="btn btn-info input-sm" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-info input-sm" data-dismiss="modal" data-bind="click:UpdateClientNow">Update</button>
                </div>
            </div>
        </div>
    </div>
</div><!--Edit client information Form Ends-->

<!--============================================================================Client Contact==================================================================-->


<div class="row nopadding  ">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12  ">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
            <div class="modal fade" id="myModalClientContact" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <!--=================================================================header ADD client information===========================================================-->
                        <div class="modal-header nopadding " id="modalheaderid">
                            <div class="col-lg-12 colmd-12  repairrequestformheader text-center ">
                                <h3 class="modal-title myModalLabel " style="color:white; ">Add Client</h3>
                            </div>
                        </div><!--Ending tag fo r edit client information-->
                        <!--================================================================================Add cliet form================================================================-->




                        <div class="modal-body ">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 noppading" style="margin-top:20px !important;">

                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12   nopadding  ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                                        Contact's First Name
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px  nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                                        <input type="text" class="form-control" data-bind="value:CCFirstName" />
                                    </div>
                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12   nopadding  ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                                        Contact's Last Name
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px  nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                                        <input type="text" class="form-control" data-bind="value:CCLastName" />
                                    </div>
                                </div>


                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        Contact's Address
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">
                                        <input type="text" class="form-control" data-bind="value:CCAddress" />
                                    </div>
                                </div>


                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        Contact's City
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        <input type="text" class="form-control" data-bind="value:CCCity" />
                                    </div>
                                </div>



                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding  ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        Contact's State
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6">

                                        <select class="form-control" data-bind=" options:StateList,optionsText:'Text', optionsValue:'Text',value:CCState"></select>
                                    </div>
                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding  ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        Contact's Zipcode
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        <input type="text" class="form-control" data-bind="value:CCZipcode" />
                                    </div>
                                </div>

                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        Contact's Phone
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        <input type="text" class="form-control" data-bind="value:CCPhone" />
                                    </div>
                                </div>

                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12  nopadding  ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6   ">
                                        Contact's Email
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        <input type="text" class="form-control" data-bind="value:CCEmail" />
                                    </div>
                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12  nopadding  ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6   ">
                                        Contact's Title
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        <input type="text" class="form-control" data-bind="value:CCTitle" />
                                    </div>
                                </div>
                                <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12  nopadding  ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6   ">
                                        Upload Pic 140 x 140
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 paddingBottom20px nopadding ">
                                    <div class="hidden-lg hidden-md col-sm-3 col-xs-3"></div>
                                    <div class="col-lg-12 col-md-12 col-sm-6 col-xs-6  ">
                                        <input id="fileInput" type="file" class="form-control" />
                                    </div>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <button type="button" class="btn btn-info input-sm" data-dismiss="modal">Cancel</button>
                                    <button type="button" class="btn btn-info input-sm" data-dismiss="modal" data-bind="click:SaveNewContact">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!--Edit client information Form Ends-->
            </div>
        </div>
    </div>
</div>



<!--============================================================================Client Contact==================================================================-->



<div class="row nopadding  ">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12   ">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
            <div class="modal fade" id="myModalViewClientContact" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-md">
                    <div class="modal-content">
                        <div class="modal-header nopadding " id="modalheaderid">
                            <div class="col-lg-12 colmd-12  repairrequestformheader text-center ">
                                <h3 class="modal-title" id="myModalLabel " style="color:white; ">Contact Information</h3>
                            </div>
                        </div>
                        <div class="modal-body ">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 " style="margin-top:20px !important;">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12  text-center noppading"
                                     data-bind="foreach:ClientContacts">

                                    <div class=" col-lg-4 col-md-4 col-sm-4 col-xs-4 text-right ClientContact_img">

                                        <div data-bind="if:PhotoUrlCheck">
                                            <img data-bind="attr:{src: PhotoName}" width="140" height="140" alt="..." class="img-circle">

                                        </div>
                                        <div data-bind="ifnot:PhotoUrlCheck">
                                            <span class="fa fa-user fa-5x img-circle" width="140" height="140" alt="..."></span>

                                        </div>



                                    </div>
                                    <div class=" col-lg-2 col-md-2 col-sm-2 col-xs-2 text-right ClientContact">
                                        <div class="Client_Contact_labels"> Name:&nbsp;</div>
                                        <div class="Client_Contact_labels">Address:&nbsp;</div>
                                        <br />
                                        <div class="Client_Contact_labels">Phone:&nbsp;</div>
                                        <div class="Client_Contact_labels">Email:&nbsp;</div>
                                        <div class="Client_Contact_labels">Title:&nbsp;</div>
                                        <br />

                                    </div>
                                    <div class=" col-lg-4 col-md-4 col-sm-4 col-xs-4 text-left  ClientContact">
                                        <div data-bind="text:FullName"></div>
                                        <div data-bind="text:Address"></div>
                                        <div data-bind="text:FullAddress"></div>
                                        <div data-bind="text:Phone"></div>
                                        <div data-bind="text:Email"></div>
                                        <div data-bind="text:CCTitle"></div>
                                        <div><span class="linkdefault">Edit </span> | <span class="linkdefault hollow5" data-bind="click:deleteClientContact"> Delete</span> </div>
                                    </div>
                                    <div class=" col-lg-2 col-md-2 col-sm-2 col-xs-2  text-left ClientContact">
                                        <span class="  hollow5">Share <span class="fa fa-share"></span></span><br /><br />
                                        <span class="  hollow5" data-bind="click:printmyinfo">
                                            Print  <span class="fa fa-print"></span>
                                        </span><br /><br />
                                        <span class="  hollow5">
                                            Download <span class="fa fa-download"></span>
                                        </span>


                                        <br />
                                        <br />
                                        <br />
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <button type="button" class="btn btn-info input-sm" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<div class="modal fade" id="myModalDelete" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header blueDefault   " id="modalheaderid">
                Are you sure you want delete <span data-bind="text:SelectedClientName"></span>?
            </div>
            <div class="modal-body deletebox ">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-center">
                        <button class="btn btn-default" data-dismiss="modal" id="deletecancelid">Cancel</button>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-center">
                        <button class="btn btn-default" data-bind="click:deleteclient" data-dismiss="modal" id="deleteid" onclick="fakeClick(event, document.getElementById('xbuttonclientid'))">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!--End Html Code-->
<!--Start JavaScript code-->
            @section scripts
{
<script src="~/Scripts/jquery-2.1.3.min.js"></script>
<script src="~/Scripts/knockout-3.1.0.js"></script>
<script src="~/Scripts/knockout.mapping-latest.js"></script>


<script src="~/Scripts/jquery.signalR2.1.2.min.js"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>

                @*<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">*@
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<script src="~/Scripts/knockout-bootstrap.min.js"></script>
<script type="text/javascript">
    //jquery here
    function fakeClick(event, anchorObj) {
        if (anchorObj.click) {
            anchorObj.click()
        } else if (document.createEvent) {
            if (event.target !== anchorObj) {
                var evt = document.createEvent("MouseEvents");
                evt.initMouseEvent("click", true, true, window,
                    0, 0, 0, 0, 0, false, false, false, false, 0, null);
                var allowDefault = anchorObj.dispatchEvent(evt);
                // you can check allowDefault for false to see if
                // any handler called evt.preventDefault().
                // Firefox will *not* redirect to anchorObj.href
                // for you. However every other browser will.
            }
        }
    }


    $('.imgmenu').click(function () {
        var menuid = $(this).attr("data-linkme");
        $(this).toggleClass("hoveron");
        $('.extraContent[data-linked =' + menuid + ']').slideToggle();
    }
    );
    $(function () {
        //popover advance options
        $('[data-toggle="popover"]').popover({
            placement: 'left',
            html: true,
            content: function () {
                return $('#popover_content_wrapper').html();
            }
        });



        $('#deletecancelid').click(function () {
            $('#facongid').trigger("click");


        });

        $('#deleteid').click(function () {
            $('#facongid').trigger("click");

        });


        $(function(){

            $('body').on('click', function (e) {
                $('[data-toggle="popover"]').each(function () {
                    //the 'is' for buttons that trigger popups
                    //the 'has' for icons within a button that triggers a popup
                    if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
                        $(this).popover('hide');
                    }
                });
            });

            $('html').on('click', function(e) {
                if (typeof $(e.target).data('original-title') == 'undefined' &&
                   !$(e.target).parents().is('.popover.in')) {
                    $('[data-original-title]').popover('hide');
                }
            });

            $('.fa-search').on("click",function(){
                $('#buildingsearchid').focus();
            });





        });


        ////popover building search
        //$('[data-toggle="popoverBuildingSearch"]').popover({
        //    placement: 'left',
        //    html: true,
        //    id:"searchloopid1",

        //    content: function () {
        //        return $('#popover_Searchloop_wrapper').html();
        //    }
        //});



        var viewModel = function () {
            var self = this;

            function get_hostname(url) {
                var m = url.match(/^http:\/\/[^/]+/);
                return m ? m[0] : null;
            }

            var ClientID = @ViewBag.ClientID;

            //===================================================================Add Client============================================================================

            self.StateList = ko.observableArray();

            self.ClientName = ko.observable("Golden Real State");
            self.ClientAddress = ko.observable("1372 Broadway");
            self.ClientCity = ko.observable("New York");
            self.ClientState = ko.observable("NY");
            self.ClientZipcode = ko.observable("10018");
            self.ClientPhone = ko.observable("3476990088");
            self.ClientFax = ko.observable("3475889988");
            self.ClientEmail = ko.observable("Golden@mail.com");
            self.ClientContactName = ko.observable();
            self.ClientContactPhone = ko.observable();
            self.ClientContactEmail = ko.observable();

            self.NewBuildingName = ko.observable("Golden Real State");
            self.NewBuildingtAddress = ko.observable("1372 Broadway");
            self.NewBuildingtCity = ko.observable("New York");
            self.NewBuildingState = ko.observable("NY");
            self.NewBuildingtZipcode = ko.observable("10018");



            self.offoron = ko.observable(false);
            self.SelectedClientName = ko.observable();
            self.SelectedClientFullAddress = ko.observable();
            self.SelectedClientPhone = ko.observable();
            self.SelectedClientEmail = ko.observable();
            self.SelectedClientFax = ko.observable();
            self.SelectedClientID = ko.observable(ClientID);

            self.SelectedClientAddress = ko.observable();
            self.SelectedClientCity = ko.observable();
            self.SelectedClientState = ko.observable();
            self.SelectedClientZipcode = ko.observable();

            self.ClientList = ko.observableArray();

            self.Search = ko.observable();

            self.BuildingList = ko.observableArray();

            self.CCFirstName = ko.observable("Joal");
            self.CCLastName = ko.observable("Roca");
            self.CCAddress = ko.observable("763 7TH Ave");
            self.CCCity = ko.observable("New York");
            self.CCState = ko.observable("NY");
            self.CCZipcode = ko.observable("10018");
            self.CCPhone = ko.observable("3476589876");
            self.CCEmail = ko.observable("JoalRoca@mail.com");
            self.CCTitle = ko.observable("Accountant");
            self.Filename = ko.observable();

            self.ClientContacts = ko.observableArray();
            var NewContact =
                {
                    ClientID:@ViewBag.ClientID,
                    First_Name_: self.CCFirstName,
                    Last_Name_: self.CCLastName,
                    Address_: self.CCAddress,
                    City:self.CCCity,
                    State:self.CCState,
                    Zipcode:self.CCZipcode,
                    Phone:self.CCPhone,
                    Email:self.CCEmail,
                    Title:self.CCTitle,
                    PhotoName:self.Filename
                }



            self.SaveNewContact = function(){
                //ajax to server

                //document.getElementById('uploader').onsubmit = function () {
                var formdata = new FormData(); //FormData object
                var fileInput = document.getElementById('fileInput');
                //Iterating through each files selected in fileInput
                for (i = 0; i < fileInput.files.length; i++) {
                    //Appending each file to FormData object
                    formdata.append(fileInput.files[i].name, fileInput.files[i]);

                    self.Filename(fileInput.files[i].name);
                }
                //Creating an XMLHttpRequest and sending
                var xhr = new XMLHttpRequest();
                xhr.open('POST', '/building/Upload');
                xhr.send(formdata);
                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4 && xhr.status == 200) {
                        //alert(xhr.responseText);
                    }
                }


                //}
               

                $.ajaxSettings.traditional = true;
                $.ajax(
                    {
                        type: "Post",
                        url: '/building/NewClientContact/',
                        dataType: "json",
                        data: NewContact,
                        success: function (data) {
                            self.ClientContacts.removeAll();
                            var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                            var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName
                            for (var i = 0; i < TrkPkgs.length; i++) {
                                self.ClientContacts.push({
                                    ClientContactID: ko.observable(TrkPkgs[i].ID),
                                    FirstName: ko.observable(TrkPkgs[i].First_Name_),
                                    LastName: ko.observable(TrkPkgs[i].Last_Name_),
                                    Address: ko.observable(TrkPkgs[i].Address_),
                                    City: ko.observable(TrkPkgs[i].City),
                                    State: ko.observable(TrkPkgs[i].State),
                                    Zipcode: ko.observable(TrkPkgs[i].Zipcode),
                                    Phone: ko.observable(TrkPkgs[i].Phone),
                                    Email: ko.observable(TrkPkgs[i].Email),
                                    FullName: TrkPkgs[i].First_Name_ + " " + TrkPkgs[i].Last_Name_,
                                    FullAddress: TrkPkgs[i].City + " "+ ""+ TrkPkgs[i].State +" "+TrkPkgs[i].Zipcode,
                                    Title:ko.observable(TrkPkgs[i].Title),
                                    PhotoUrlCheck:TrkPkgs[i].PhotoName,
                                    PhotoName:"/Uploads/"+TrkPkgs[i].PhotoName
                                });
                            }

                        }
                    });

            };

            self.SelectedClientName("@ViewBag.ClientName");
            self.SelectedClientFullAddress("@ViewBag.FullAddress");
            self.SelectedClientPhone("@ViewBag.Phone");
            self.SelectedClientEmail("@ViewBag.Email");
            self.SelectedClientFax("@ViewBag.Fax");
            self.SelectedClientID("@ViewBag.ClientID");

            self.SelectedClientAddress("@ViewBag.Address");
            self.SelectedClientCity("@ViewBag.City");
            self.SelectedClientState("@ViewBag.State");
            self.SelectedClientZipcode("@ViewBag.Zipcode");






        $.ajaxSettings.traditional = true;
        $.ajax(
            {
                type: "GET",
                url: '/building/ClientBuildingList/',
                data: { ClientID: ClientID },
                dataType: "json",
                success: function (data) {
                    self.BuildingList.removeAll();
                    var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                    var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName
                    for (var i = 0; i < TrkPkgs.length; i++) {
                        self.BuildingList.push({
                            BLBuildingName: ko.observable(TrkPkgs[i].BuildingName),
                            BLBuildingAddress: ko.observable(TrkPkgs[i].BuildingAddress),
                            BLPhone: ko.observable(TrkPkgs[i].Phone),
                            BLbuildingID: ko.observable(TrkPkgs[i].BuildingID)

                        });
                    }
                }
            });




        //Add Building
        var NewBuilding = {
            BuildingName: self.NewBuildingName,
            Address: self.NewBuildingtAddress,
            City: self.NewBuildingtCity,
            State: self.NewBuildingState,
            Zipcode: self.NewBuildingtZipcode,
            ClientID: SelectedClientID
        };

        self.AddNewBuilding = function () {

            $.ajaxSettings.traditional = true;
            $.ajax(
                {
                    type: "Post",
                    url: '/building/AddBuilding/',
                    dataType: "json",
                    data: NewBuilding,
                    success: function (data) {

                        self.BuildingList.removeAll();
                        var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                        var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName
                        for (var i = 0; i < TrkPkgs.length; i++) {
                            self.BuildingList.push({
                                BLBuildingName: ko.observable(TrkPkgs[i].BuildingName),
                                BLBuildingAddress: ko.observable(TrkPkgs[i].BuildingAddress),
                                BLPhone: ko.observable(TrkPkgs[i].Phone),
                                BLbuildingID: ko.observable(TrkPkgs[i].BuildingID)

                            });
                        }

                    }
                });

        };

        //Get states
        self.GetStates = function () {

            $.ajaxSettings.traditional = true;
            $.ajax(
                {
                    type: "GET",
                    url: '/building/States/',
                    dataType: "json",
                    success: function (data) {

                        var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string
                        var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName





                    }
                });

        };

        var AddClienttodb =
            {
                //match db fields
                ClientName: self.ClientName,
                Address: self.ClientAddress,
                Phone: self.ClientPhone,
                Fax: self.ClientFax,
                Email: self.ClientEmail,
                City: self.ClientCity,
                State: self.ClientState,
                ZipCode: self.ClientZipcode
            }

        self.AddClient = function () {



            // add ajax code to pass AddClienttodb
            //on success add populate clientlist



            $.ajaxSettings.traditional = true;
            $.ajax(
                {
                    type: "Post",
                    url: '/building/AddClient/',
                    dataType: "json",
                    data:AddClienttodb,
                    success: function (data) {
                        self.ClientList.removeAll();
                        self.offoron(true);
                        var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                        var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName

                        for (var i = 0; i < TrkPkgs.length; i++) {

                            self.ClientList.push({
                                ClientID: ko.observable(TrkPkgs[i].BUildingID),
                                ClientName: ko.observable(TrkPkgs[i].ClientName),
                                ClientPhone: ko.observable(TrkPkgs[i].ClientPhone),
                                ClientFullAddress: ko.observable(TrkPkgs[i].ClientAddress),
                                ClientEmail: ko.observable(TrkPkgs[i].ClientEmail),
                                ClientAddress: ko.observable(TrkPkgs[i].ClientAddress),
                                ClientCity: ko.observable(TrkPkgs[i].ClientCity),
                                ClientState: ko.observable(TrkPkgs[i].ClientState),
                                ClientZipcode: ko.observable(TrkPkgs[i].ClientZipcode),
                                ClientFax: ko.observable(TrkPkgs[i].ClientFax)
                            });
                        }
                    }
                });
        };

        self.deleteclient =  function () {


            $.ajaxSettings.traditional = true;
            $.ajax(
                {
                    type: "Post",
                    url: '/building/deleteClient/',
                    dataType: "json",
                    data: { ClientID: self.SelectedClientID() },
                    success: function (data) {
                        self.ClientList.removeAll();
                        self.offoron(true);
                        var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                        var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName

                        for (var i = 0; i < TrkPkgs.length; i++) {

                            self.ClientList.push({
                                ClientID: ko.observable(TrkPkgs[i].BUildingID),
                                ClientName: ko.observable(TrkPkgs[i].ClientName),
                                ClientPhone: ko.observable(TrkPkgs[i].ClientPhone),
                                ClientFullAddress: ko.observable(TrkPkgs[i].ClientAddress),
                                ClientEmail: ko.observable(TrkPkgs[i].ClientEmail),
                                ClientAddress: ko.observable(TrkPkgs[i].ClientAddress),
                                ClientCity: ko.observable(TrkPkgs[i].ClientCity),
                                ClientState: ko.observable(TrkPkgs[i].ClientState),
                                ClientZipcode: ko.observable(TrkPkgs[i].ClientZipcode),
                                ClientFax: ko.observable(TrkPkgs[i].ClientFax)
                            });
                        }
                    }
                }).done(function () {



                    window.location.href = "/Building/ClientHome";


                    //$('.$("#myModal").modal('hide').on('hidden.bs.modal', functionThatEndsUpDestroyingTheDOM);').modal('hide');
                    //$(".modal").modal('hide');

                    //$('body').removeClass('modal-open');
                    //$('.modal-backdrop').remove();
                    //$(".modal").removeAttr('hide');
                    // $('.fade').remove();
                });

        };



        self.editme = function () {


        }


        self.Search.subscribe(function (value) {


            $.ajaxSettings.traditional = true;
            $.ajax(
                {
                    type: "GET",
                    url: '/building/SearchClientList/',
                    dataType: "json",
                    data: { Search: value },
                    success: function (data) {

                        self.ClientList.removeAll();
                        self.offoron(true);
                        var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                        var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName

                        for (var i = 0; i < TrkPkgs.length; i++) {

                            self.ClientList.push({
                                ClientID: ko.observable(TrkPkgs[i].BUildingID),
                                ClientName: ko.observable(TrkPkgs[i].ClientName),
                                ClientPhone: ko.observable(TrkPkgs[i].ClientPhone),
                                ClientFullAddress: ko.observable(TrkPkgs[i].ClientAddress),
                                ClientEmail: ko.observable(TrkPkgs[i].ClientEmail),
                                ClientAddress: ko.observable(TrkPkgs[i].ClientAddress),
                                ClientCity: ko.observable(TrkPkgs[i].ClientCity),
                                ClientState: ko.observable(TrkPkgs[i].ClientState),
                                ClientZipcode: ko.observable(TrkPkgs[i].ClientZipcode),
                                ClientFax: ko.observable(TrkPkgs[i].ClientFax)
                            });
                        }
                    }
                });

        });


        $.ajaxSettings.traditional = true;
        $.ajax(
            {
                type: "GET",
                url: '/building/States/',
                dataType: "json",
                success: function (data) {

                    var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string
                    var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName

                    self.StateList(TrkPkgs);



                }
            });





        self.clearinputfield = function () {
            self.buildingSearch("");

        }




        self.buildingSearch = ko.observable();

        self.buildingSearch.subscribe(function (value) {




            $.ajaxSettings.traditional = true;
            $.ajax(
                {
                    type: "GET",
                    url: '/building/Search4Building/',
                    data: { Search: value, ClientID: self.SelectedClientID() },
                    dataType: "json",
                    success: function (data) {
                        self.BuildingList.removeAll();
                        var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                        var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName
                        for (var i = 0; i < TrkPkgs.length; i++) {
                            self.BuildingList.push({
                                BLBuildingName: ko.observable(TrkPkgs[i].BuildingName),
                                BLBuildingAddress: ko.observable(TrkPkgs[i].BuildingAddress),
                                BLPhone: ko.observable(TrkPkgs[i].Phone),
                                BLbuildingID: ko.observable(TrkPkgs[i].BuildingID)

                            });
                        }
                    }
                });

        });



        self.citystatezip = ko.computed(function () {
            return self.SelectedClientCity() + " " + self.SelectedClientState() + ", " + self.SelectedClientZipcode();
        });

        self.getBuildinginfo = function (value, event) {
            var myvalue = ko.toJSON(value);

            var myjson = JSON.parse(myvalue);

        };

        self.ClientList = ko.observableArray();
        $.ajaxSettings.traditional = true;
        $.ajax(
            {
                type: "GET",
                url: '/building/ClientList/',
                dataType: "json",
                success: function (data) {
                    self.offoron(true);
                    var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                    var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName

                    for (var i = 0; i < TrkPkgs.length; i++) {

                        self.ClientList.push({
                            ClientID: ko.observable(TrkPkgs[i].BUildingID),
                            ClientName: ko.observable(TrkPkgs[i].ClientName),
                            ClientPhone: ko.observable(TrkPkgs[i].ClientPhone),
                            ClientFullAddress: ko.observable(TrkPkgs[i].ClientAddress),
                            ClientEmail: ko.observable(TrkPkgs[i].ClientEmail),
                            ClientAddress: ko.observable(TrkPkgs[i].ClientAddress),
                            ClientCity: ko.observable(TrkPkgs[i].ClientCity),
                            ClientState: ko.observable(TrkPkgs[i].ClientState),
                            ClientZipcode: ko.observable(TrkPkgs[i].ClientZipcode),
                            ClientFax: ko.observable(TrkPkgs[i].ClientFax)
                        });
                    }
                }
            });

        self.SelectedBuildingName = ko.observable();
        self.SelectedBuildingAddress = ko.observable();
        self.SelectedPhone = ko.observable();

        self.BuildingSelected = function (value, event) {
            var myvalue = ko.toJSON(value);

            var myjson = JSON.parse(myvalue);

            self.SelectedBuildingName(myjson.BLBuildingName);
            self.SelectedBuildingAddress(myjson.BLBuildingAddress);
            self.SelectedPhone(myjson.BLPhone);

            window.location.href = "/Building/BuildingProfile?BuildingID=" + myjson.BLbuildingID;

        };

        //Edited client information

        var UpdateClient =
            {
                ID: self.SelectedClientID,
                ClientName: self.SelectedClientName,
                Address: self.SelectedClientAddress,
                City: self.SelectedClientCity,
                State: self.SelectedClientState,
                Phone: self.SelectedClientPhone,
                ZipCode: self.SelectedClientZipcode,
                Fax: self.SelectedClientFax,
                Email: self.SelectedClientEmail
            };


        self.UpdateClientNow = function () {

            $.ajaxSettings.traditional = true;
            $.ajax(
                {
                    type: "GET",
                    url: '/building/EditClientAjax/',
                    data: UpdateClient,
                    dataType: "json",
                    success: function (data) {
                        var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string


                        var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName


                        self.ClientList.removeAll();


                        for (var i = 0; i < TrkPkgs.length; i++) {

                            self.ClientList.push({
                                ClientID: ko.observable(TrkPkgs[i].BUildingID),
                                ClientName: ko.observable(TrkPkgs[i].ClientName),
                                ClientPhone: ko.observable(TrkPkgs[i].ClientPhone),
                                ClientFullAddress: ko.observable(TrkPkgs[i].ClientAddress),
                                ClientEmail: ko.observable(TrkPkgs[i].ClientEmail),
                                ClientAddress: ko.observable(TrkPkgs[i].ClientAddress),
                                ClientCity: ko.observable(TrkPkgs[i].ClientCity),
                                ClientState: ko.observable(TrkPkgs[i].ClientState),
                                ClientZipcode: ko.observable(TrkPkgs[i].ClientZipcode),
                                ClientFax: ko.observable(TrkPkgs[i].ClientFax)
                            });
                        }
                    }
                });


        };


        self.deleteClientContact = function(value){
            var myvalue = ko.toJSON(value);

            var myjson = JSON.parse(myvalue);

          

            $.ajaxSettings.traditional = true;
            $.ajax(
                {
                    type: "Post",
                    url: '/building/DeleteClientContact/',
                    dataType: "json",
                    data: {ClientContactID:myjson.ClientContactID, ClientID:@ViewBag.ClientID},
                    success: function (data) {
                        self.ClientContacts.removeAll();
                        var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                        var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName
                        for (var i = 0; i < TrkPkgs.length; i++) {
                            self.ClientContacts.push({
                                ClientContactID: ko.observable(TrkPkgs[i].ID),
                                FirstName: ko.observable(TrkPkgs[i].First_Name_),
                                LastName: ko.observable(TrkPkgs[i].Last_Name_),
                                Address: ko.observable(TrkPkgs[i].Address_),
                                City: ko.observable(TrkPkgs[i].City),
                                State: ko.observable(TrkPkgs[i].State),
                                Zipcode: ko.observable(TrkPkgs[i].Zipcode),
                                Phone: ko.observable(TrkPkgs[i].Phone),
                                Email: ko.observable(TrkPkgs[i].Email),
                                FullName: TrkPkgs[i].First_Name_ + " " + TrkPkgs[i].Last_Name_,
                                FullAddress: TrkPkgs[i].City + " "+ ""+ TrkPkgs[i].State +" "+TrkPkgs[i].Zipcode,
                                Title:ko.observable(TrkPkgs[i].Title),
                                PhotoUrlCheck:TrkPkgs[i].PhotoName,
                                PhotoName: get_hostname(window.location.href)+"/Uploads/"+TrkPkgs[i].PhotoName
                            });
                        }

                    }
                });
        };






            //ajax to server

        $.ajaxSettings.traditional = true;
        $.ajax(
            {
                type: "Get",
                url: '/building/GetClientContact/',
                dataType: "json",
                data: {ClientID:@ViewBag.ClientID},
                    success: function (data) {
                        self.ClientContacts.removeAll();
                        var jsonresult = JSON.stringify(data.Data);// Json.stringify make an object into a json string

                        var TrkPkgs = JSON.parse(jsonresult); //JSON.parse makes a json string into a json object example obj.FirstName
                        for (var i = 0; i < TrkPkgs.length; i++) {
                            self.ClientContacts.push({
                                ClientContactID: ko.observable(TrkPkgs[i].ID),
                                FirstName: ko.observable(TrkPkgs[i].First_Name_),
                                LastName: ko.observable(TrkPkgs[i].Last_Name_),
                                Address: ko.observable(TrkPkgs[i].Address_),
                                City: ko.observable(TrkPkgs[i].City),
                                State: ko.observable(TrkPkgs[i].State),
                                Zipcode: ko.observable(TrkPkgs[i].Zipcode),
                                Phone: ko.observable(TrkPkgs[i].Phone),
                                Email: ko.observable(TrkPkgs[i].Email),
                                FullName: TrkPkgs[i].First_Name_ + " " + TrkPkgs[i].Last_Name_,
                                FullAddress: TrkPkgs[i].City + " "+ ""+ TrkPkgs[i].State +" "+TrkPkgs[i].Zipcode,
                                Title:ko.observable(TrkPkgs[i].Title),
                                PhotoUrlCheck:TrkPkgs[i].PhotoName,
                                PhotoName:"/Uploads/"+TrkPkgs[i].PhotoName
                            });
                        }

                    }
                });




            self.printmyinfo = function(data, event){
                var myvalue = ko.toJSON(data);
                var myjson = JSON.parse(myvalue);
                //==========================print preview page ==========================================================
                var prtContent = "<div>"+ myjson.FirstName+ " " +myjson.LastName+"</div>"+
                                    "<div>"+ myjson.Address+"</div>"+
                                    "<div>"+ myjson.FullAddress+"</div>"+
                                    "<div>"+ myjson.Phone+"</div>"+
                                    "<div>"+ myjson.Email+"</div>"+
                                    "<div>"+ myjson.Title+"</div>";

                var WinPrint = window.open('', '', 'left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0');
                WinPrint.document.write(prtContent);
                WinPrint.document.close();
                WinPrint.focus();
                WinPrint.print();
                //==========================print preview page ==========================================================
            };






        };

        ko.applyBindings(viewModel);
    });

</script>
            }
<!--End JavaScript code-->
