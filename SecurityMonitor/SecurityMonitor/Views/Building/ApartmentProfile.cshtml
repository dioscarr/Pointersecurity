@model IEnumerable<SecurityMonitor.Models.ApartmentVM>
@using SecurityMonitor.Models;
@{
    ViewBag.Title = "ApartmentProfile";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<body style="background:darkgrey;">
    
    <div class="container" style="background:darkgrey;">
        <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12 " style="height:20px;">
        </div>
        <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12  ">
            <!--Building info section starts-->
           
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 whitecolor" style="height:200px;  ">
                <div class="col-md-12" style="height:20px;"></div>
                 @{ var buildinginfo = (BuildingInfoVM)Session["Building"];}
                <div class="col-md-3 col-xs-3"><p>Building Name</p></div>
                <div class="col-md-9  col-xs-9 text-left"><p>@buildinginfo.BuildingName</p></div>

                @foreach (var item in Model)
                {
                    <div class="col-md-3 col-xs-6"><p>@Html.DisplayNameFor(model => model.ApartmentNumber)</p></div>
                    <div class="col-md-9  col-xs-6 text-left"><p> @Html.DisplayFor(modelItem => item.ApartmentNumber)</p></div>

                    <div class="col-md-3 col-xs-6"><p> @Html.DisplayNameFor(model => model.FloorNumber)</p></div>
                    <div class="col-md-9  col-xs-6 text-left"><p>@Html.DisplayFor(modelItem => item.FloorNumber)</p></div>

                    <div class="col-md-3 col-xs-6"><p>@Html.DisplayNameFor(model => model.BuildingID)</p></div>
                    <div class="col-md-9  col-xs-6 text-left"><p>@Html.DisplayFor(modelItem => item.BuildingID)</p></div>
                }
                <div class="col-md-3 col-xs-6"><p>Address</p></div>
                <div class="col-md-9  col-xs-6 text-left"><p>@buildinginfo.Address @buildinginfo.City @buildinginfo.States @buildinginfo.ZipCode</p></div>

            </div>

            <!--Building info section ends-->
            <!--Request section starts-->
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 whitecolor" style="height:200px;">
                <h1>Requests</h1>
            </div>
        </div>
        <!--Add and romove buttons starts-->
        <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 whitecolor">
                @foreach (var item in Model)
                {
                <button type="button" class="btn btn-default" style="margin:10px;"
                       
                        onclick="location.href = '@Url.Action("AddingTenant", "Building", new { ApartmentID = @item.ID })'">Add Tenant</button>
                        }
                        </div>
           
         </div>
        <!--Add and romove buttons ends-->
            <!--Request section ends-->

            <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12 " style="height:20px;">


            </div>

            @foreach (var item in ViewBag.tenant)
            {
    <!--Tenant section starts-->
                <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
                    <!--Tenant Info section starts-->
                    <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 whitecolor" style="height:280px;">
                        <h1> @item.FirstName</h1>
                        <button type="button" class="btn btn-default" style="margin:10px;"
                                onclick="location.href = '@Url.Action("DeleteTenant", "Building", new { TenantID = @item.ID })'">Remove Tenant</button>
                       
                    </div>
                    

                   
                    <!--Tenant Info section ends-->
                    <!--Tenant graph section starts-->
                    <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 whitecolor" style="height:280px;">
                      <h3>Resquests Type</h3>
                        <canvas id="doughNutChartLoc@(item.ID)" class="mygraph" height="200" width="200" data-tenantid="@item.ID"></canvas>
                      
                    </div>
                    <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12 whitecolor" style="height:280px;">
                        <h3>Current Request</h3>
                        <canvas id="pieChartLoc@(item.ID)" class="mygraph" height="240" width="400" data-tenantpie="@item.ID"></canvas>

                    </div>
                    <!--Tenant graph section ends-->
                </div>
            <!--Tenant section ends-->
                <div class="row col-lg-12 col-md-12 col-sm-12 col-xs-12 " style="height:20px;">
                </div>
            }


        </div>
    
</body>

@section scripts
{


    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

    <script src="~/Scripts/Chart.min.js"></script>

   <script type="text/javascript">
    $(document).ready(function (e) {
        var canvascount = document.getElementsByTagName("canvas");
        for (var i = 0; i <= canvascount.length - 1; i++) {
            var data_TenantID = canvascount[i].getAttribute("data-tenantid");
            i++;
            var data = [
                           {
                               value: 50,
                               color: "lightblue",
                               label: "dioscar"

                           },
                           {
                               value: 10,
                               color: "red",
                               label: "dioscar"
                           },
                           {
                               value: 40,
                               color: "green",
                               label: "dioscar"
                           }
                           
            ]
            var myDoughnut = new Chart(document.getElementById("doughNutChartLoc" + data_TenantID).getContext("2d")).Doughnut(data);



          

            var Bardata = {
                labels: ["Monday", "Tuesday", "Wednesday", "Thrusday", "Friday", "Saturday", "Sunday"],
                datasets: [
                    {
                        label: "My First dataset",
                        fillColor: "rgba(220,220,220,0.5)",
                        strokeColor: "rgba(220,220,220,0.8)",
                        highlightFill: "rgba(220,220,220,0.75)",
                        highlightStroke: "rgba(220,220,220,1)",
                        data: [65, 59, 80, 81, 56, 55, 40]
                    },
                    {
                        label: "My Second dataset",
                        fillColor: "rgba(151,187,205,0.5)",
                        strokeColor: "rgba(151,187,205,0.8)",
                        highlightFill: "rgba(151,187,205,0.75)",
                        highlightStroke: "rgba(151,187,205,1)",
                        data: [28, 48, 40, 19, 86, 27, 90]
                    }
                ]
            };
            data_TenantID = canvascount[i].getAttribute("data-tenantpie");
            var myBarChart = new Chart(document.getElementById("pieChartLoc" + data_TenantID).getContext("2d")).Bar(Bardata);

        };


       
    });
</script>

}