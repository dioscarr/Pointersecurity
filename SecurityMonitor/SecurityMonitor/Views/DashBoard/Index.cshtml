@{
    ViewBag.Title = "Dasboard";
}
<head>
    <title></title>
</head>
<!--Main Container-->
<div class="container myRow ">
    <div class="row text-center boxtitle" style="border:1px solid lightgrey; height:50px;"><h2>DashBoard</h2></div><!--Page title-->
    <!--================Top Section=======================-->
    <div class="row  " style="padding-bottom:50px; padding-top:60px; ">
        <!--================First Botton================-->
        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-6">
            <button class="btn btn-success" onclick="location.href = '@Url.Action("UserList", "UserVMs")'">Manage Account Users</button>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-6 pull-left">
            <button class="btn btn-success" onclick="location.href = '@Url.Action("ClientIndex", "Building")'">Manage Clients</button>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <input type="text" class="col-md-3 form-control  pull-right" id="input-search">
            <input type="submit" value="Search" class="col-md-2 col-lg-offset-1 btn btn-info  pull-right" />
        </div>
    </div>
    
    
   
    <div class="row" >
        <div class="col-md-4 " style="height:350px;  ">
            <div class="col-md-12 boxtitle text-center " style="padding-bottom:5px; ">
                <h3 style="padding-top:15px;">Something 1</h3>
            </div>
            <div class="col-md-12 shadow2" style="background:white; height:220px; border:1px solid lightgrey;">
                <div id="chart_div" style="width: 100px; height: 70px;">
                </div>
            </div>
        </div>
        <div class="col-md-4 " style="height:320px; ">
            <div class="col-md-12 boxtitle text-center " style="padding-bottom:5px;">
                <h3 style="padding-top:15px;">Something 1</h3>
            </div>
            <div class="col-md-12 shadow2" style="background:white; height:220px; border:1px solid lightgrey;">something</div>
        </div>
        <div class="col-md-4 " style="height:320px;">
            <div class="col-md-12 boxtitle text-center " style="padding-bottom:5px; ">
                <h3 style="padding-top:15px;">Something 1</h3>
            </div>
            <div class="col-md-12 shadow2" style="background:white; height:220px; border:1px solid lightgrey;">something</div>
        </div>
       
       
       

    </div>
    <div class="row text-center boxtitle" style="border:1px solid lightgrey; height:50px;"><h3>Today's Request</h3></div>
    <div class="row myRow shadow">
        <div>
            <div  id="example5.3" style="height:500px; margin:10px;"></div>
        </div>
    </div>
</div>
@section scripts
{
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <!--=====================google Chart API starts=======================================-->

    <script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization',
            'version':'1','packages':['timeline']}]}"></script>


    <!--=====================google Chart API ends=======================================-->
<script src="~/Scripts/date.js"></script>

    <script type="text/javascript">
        $(document).ready(function (e) {
            //============================google pie chart ===============================
            

            //=====================GanttChart==============================
            //===========================Charts==============================
            //=============================Google Chart===================================
            var url = '@Url.Action("getTodayRequests", "DashBoard")';
            //============google chart and ajax connection to Action===========
            $.get(url, function (data) {
                google.setOnLoadCallback(drawChart);
                function drawChart() {
                    var container = document.getElementById('example5.3');
                    var chart = new google.visualization.Timeline(container);


                    var dataTable = new google.visualization.DataTable();
                    //=======Adding Column======
                    dataTable.addColumn({ type: 'string', id: 'Room' });
                    dataTable.addColumn({ type: 'string', id: 'Name' });
                    dataTable.addColumn({ type: 'date', id: 'Start' });
                    dataTable.addColumn({ type: 'date', id: 'End' });

                    // =====year=======
                    function YearC(value) {
                        var pattern = /Date\(([^)]+)\)/;
                        var results = pattern.exec(value);
                        var dt = new Date(parseFloat(results[1]));
                        return (dt.getFullYear());
                    }
                    // =====Month=======
                    function MonthC(value) {
                        var pattern = /Date\(([^)]+)\)/;
                        var results = pattern.exec(value);
                        var dt = new Date(parseFloat(results[1]));
                        return (dt.getMonth());
                    }
                    // =====Day=======
                    function DayC(value) {
                        var pattern = /Date\(([^)]+)\)/;
                        var results = pattern.exec(value);
                        var dt = new Date(parseFloat(results[1]));
                        return dt.getDate();

                    }

                    // =====Hour=======
                    function HoursC(value) {
                        var pattern = /Date\(([^)]+)\)/;
                        var results = pattern.exec(value);
                        var dt = new Date(parseFloat(results[1]));
                        return dt.getHours();

                    }
                    // =====Minutes=======
                    function MinutesC(value) {
                        var pattern = /Date\(([^)]+)\)/;
                        var results = pattern.exec(value);
                        var dt = new Date(parseFloat(results[1]));
                        return dt.getMinutes();

                    }

                    //----------===============Loop=========
                    for (var i = 0; i < data.length; i++)
                    {
                        //===============Conerting Json Date==========
                        var FromDate = data[i].From;
                        var ToDate = data[i].To;
                       
                        //===============Conerting Json Date ends===========
                        //==========adding data to chart==========
                        dataTable.addRows(
                        [
                           [
                               data[i].Type,
                               data[i].Description,
                               new Date(parseInt(YearC(FromDate)),
                                   MonthC(FromDate),
                                   DayC(FromDate),
                                   HoursC(FromDate),
                                   MinutesC(FromDate),
                                   0),
                               new Date(YearC(ToDate),
                                   MonthC(ToDate),
                                   DayC(ToDate),
                                   HoursC(ToDate),
                                   MinutesC(ToDate),
                                   0)
                           ]
                        ]);
                    }
                    //---------===============end loop==========

                    //==========chart Options==========
                    var options = {
                        timeline: { colorByRowLabel: true },
                        backgroundColor: '#00000'

                    };

                    chart.draw(dataTable, options);
                }

            });
                   
            
            
           




                      
                });

             

    </script>
}